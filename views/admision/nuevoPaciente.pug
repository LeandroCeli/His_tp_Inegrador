extends ../layouts/layout

block content
  h2(class="text-2xl font-bold mb-6 text-gray-800 text-center") Registro de Nuevo Paciente

  div(class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow")
    form(id="patient-form" method="POST" action="/admision/pacienteCarga" class="space-y-6")
      // Personal Information
      div(class="grid grid-cols-1 md:grid-cols-2 gap-4")
        div
          label(for="dni" class="block text-sm font-medium text-gray-700") DNI
          input(id="dni" name="dni" type="text" readonly class="mt-1 block w-full bg-gray-100 rounded-md border-gray-300 shadow-sm" required)
        div
          label(for="admission-type" class="block text-sm font-medium text-gray-700") Tipo de Ingreso
          select(name="id_ingreso" id="admission-type" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm")
            option(value="") Seleccione tipo de ingreso
            each i in ingreso
             if i.nombre !== 'Reinternación Reciente'
               option(value=i.id_ingreso) #{i.nombre}

      div(id="ingreso-campos" class="space-y-4")

      div(class="grid grid-cols-1 md:grid-cols-2 gap-4")
        div
          label(for="name" class="block text-sm font-medium text-gray-700") Nombre
          input(id="name" name="name" type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required)
        div
          label(for="surname" class="block text-sm font-medium text-gray-700") Apellido
          input(id="surname" name="surname" type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required)

      div
        label(for="gender" class="block text-sm font-medium text-gray-700") Género
        select(id="gender" name="gender" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required)
          option(value="") Seleccione una opción
          option(value="masculino") Masculino
          option(value="femenino") Femenino
          option(value="otro") Otro

      div
        label(for="dob" class="block text-sm font-medium text-gray-700") Fecha de Nacimiento
        input(id="dob" name="dob" type="date" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required)

      div(class="grid grid-cols-1 md:grid-cols-2 gap-4")
        div
          label(for="phone" class="block text-sm font-medium text-gray-700") Teléfono
          input(id="phone" name="phone" type="tel" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required)
        div
          label(for="emergency-phone" class="block text-sm font-medium text-gray-700") Teléfono de Emergencia
          input(id="emergency-phone"  name="emergencyPhone" type="tel" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required)

      div
        label(for="address" class="block text-sm font-medium text-gray-700") Domicilio
        input(id="address" name="address" type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required)

      div
        label(for="nationality" class="block text-sm font-medium text-gray-700") Nacionalidad
        input(id="nationality" name="nationality" type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required)

      div
        label(for="blood-type" class="block text-sm font-medium text-gray-700") Grupo Sanguíneo
        select(id="blood-type" name="bloodType" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required)
          option(value="") Seleccione una opción
          option(value="A+") A+
          option(value="A-") A-
          option(value="B+") B+
          option(value="B-") B-
          option(value="AB+") AB+
          option(value="AB-") AB-
          option(value="O+") O+
          option(value="O-") O-

      div
        label(for="insurance" class="block text-sm font-medium text-gray-700") Seguro Médico
        select(name="id_mutual" id="insurance" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm")
          option(value="") Seleccione una mutual
          each m in mutual
            option(value=m.id_mutual) #{m.nombre_mutual}

      div(id="insurance-details")
        label(for="affiliate-number" class="block text-sm font-medium text-gray-700") Número de Afiliado
        input(id="affiliate-number" name="affiliateNumber" type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required)

      div
        label(for="referring-doctor" class="block text-sm font-medium text-gray-700") Médico que Indica la Internación
        input(id="referring-doctor" name="referringDoctor " type="text" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" required)

      div
        label(for="observations" class="block text-sm font-medium text-gray-700") Observaciones Adicionales
        textarea(id="observations" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm" rows="4")

      div(class="flex justify-end gap-4")
        a(href="/admision/dashboard" class="bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400") Cancelar
        button(type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700") Registrar Paciente
    
    script(src="/js/ingreso.js")
